<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>网页打飞机游戏</title>
<style>
  body { margin: 0; padding: 0; overflow: hidden; background-color: #000; }
  canvas { display: block; margin: 0 auto; }
  #info, #score { color: white; position: absolute; }
  #info { top: 10px; left: 10px; }
  #score { top: 10px; right: 10px; }
  button#startBtn {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); padding: 10px;
  }
  #resume {
    color: white; position: absolute; bottom: -100%; width: 50%; left: 50%;
    transform: translateX(-50%); text-align: center; font-size: 18px; display: none;
    background: transparent;
  }
  #backBtn {
    position: fixed; right: 20px; bottom: 20px; padding: 10px 20px;
    background: #8a2be2; color: white; border: none; border-radius: 5px;
    font-size: 16px; cursor: pointer; display: none; z-index: 9999;
  }
  .floating-text {
    position: absolute; color: yellow; font-size: 24px; pointer-events: none;
    animation: rise 1s ease-out forwards;
  }
  @keyframes rise {
    0% { opacity: 1; transform: translateY(0); }
    100% { opacity: 0; transform: translateY(-50px); }
  }
  @keyframes scrollUp {
    from { bottom: -100%; }
    to { bottom: 20%; }
  }
</style>
</head>
<body>

<canvas id="gameCanvas"></canvas>
<div id="info">操作：鼠标移动控制飞机，单击射击</div>
<div id="score">击毁敌机：0</div>
<button id="startBtn">开始游戏</button>
<div id="resume">
  <h2>个人简历</h2>
  <p>姓名：王保民</p>
  <p>职业：美术总监</p>
  <p>联系方式：luxi_007@163.com / 13564009387</p>
  <p>曾任职于Garena与Ubisoft，参与FreeFire、Breakout、Hero of Newerth、Farcry3等项目，担任美术总监与SFX Artist，具备丰富的项目统筹与视觉艺术设计经验，擅长雕塑、贴图、特效与动画团队管理。</p>
</div>
<button id="backBtn">返回游戏</button>

<script>
const canvas = document.getElementById('gameCanvas');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
const ctx = canvas.getContext('2d');
const startBtn = document.getElementById('startBtn');
const resume = document.getElementById('resume');
const backBtn = document.getElementById('backBtn');
const scoreDisplay = document.getElementById('score');
let bullets = [], enemies = [];
let plane = { x: canvas.width / 2, y: canvas.height - 50, width: 40, height: 40 };
let running = false;
let score = 0;
let gameLoopId;
let enemyInterval;
const resumeText = '王保民 男 1977年生于上海。2000年毕业于天津美术学院雕塑系。2000至2014年在Ubisoft参与《孤岛惊魂》《细胞分裂》等项目，任特效及贴图美术。2014年加入Garena，主导《FreeFire》等项目视觉开发。擅长SFX、Shader、特效管理与团队建设。';

canvas.addEventListener('mousemove', (e) => {
  plane.x = e.clientX - plane.width / 2;
  plane.y = e.clientY - plane.height / 2;
});
canvas.addEventListener('click', () => {
  bullets.push({ x: plane.x + plane.width / 2 - 2, y: plane.y });
});
function spawnEnemy() {
  enemies.push({ x: Math.random() * (canvas.width - 30), y: -30 });
}
function drawPlane() {
  ctx.fillStyle = 'white';
  ctx.fillRect(plane.x, plane.y, plane.width, plane.height);
}
function drawBullets() {
  ctx.fillStyle = 'yellow';
  bullets.forEach((b, i) => {
    b.y -= 5;
    ctx.fillRect(b.x, b.y, 4, 10);
    if (b.y < 0) bullets.splice(i, 1);
  });
}
function drawEnemies() {
  ctx.fillStyle = 'red';
  enemies.forEach((e, i) => {
    e.y += 2;
    ctx.fillRect(e.x, e.y, 30, 30);
    if (e.y > canvas.height) {
      running = false;
      clearInterval(enemyInterval);
      alert('游戏失败，点击确定重新开始！');
      startBtn.style.display = 'block';
      cancelAnimationFrame(gameLoopId);
    }
  });
}
function showFloatingText(char, x, y) {
  const text = document.createElement('div');
  text.className = 'floating-text';
  text.style.left = `${x}px`;
  text.style.top = `${y}px`;
  text.textContent = char;
  document.body.appendChild(text);
  setTimeout(() => text.remove(), 1000);
}
function checkCollisions() {
  bullets.forEach((b, bi) => {
    enemies.forEach((e, ei) => {
      if (b.x < e.x + 30 && b.x + 4 > e.x && b.y < e.y + 30 && b.y + 10 > e.y) {
        bullets.splice(bi, 1);
        enemies.splice(ei, 1);
        if (score < resumeText.length) {
          showFloatingText(resumeText[score], e.x + 15, e.y);
        }
        score++;
        scoreDisplay.textContent = `击毁敌机：${score}`;
        if (score >= resumeText.length) {
          running = false;
          cancelAnimationFrame(gameLoopId);
          clearInterval(enemyInterval);
          const bgImage = new Image();
          bgImage.onload = () => {
            const scaleFactor = canvas.width / bgImage.width;
            const imgHeight = bgImage.height * scaleFactor;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(bgImage, 0, 0, canvas.width, imgHeight);
            resume.style.display = 'block';
            resume.style.animation = 'scrollUp 20s linear forwards';
            backBtn.style.display = 'block';
          };
          bgImage.src = '2d_art_30.png';
        }
      }
    });
  });
}
function gameLoop() {
  if (!running) return;
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawPlane(); drawBullets(); drawEnemies(); checkCollisions();
  gameLoopId = requestAnimationFrame(gameLoop);
}
startBtn.addEventListener('click', () => {
  running = true; score = 0;
  bullets = []; enemies = [];
  scoreDisplay.textContent = '击毁敌机：0';
  resume.style.display = 'none'; resume.style.animation = 'none';
  startBtn.style.display = 'none'; backBtn.style.display = 'none';
  enemyInterval = setInterval(spawnEnemy, 10);
  gameLoop();
});
backBtn.addEventListener('click', () => {
  bullets = [];
  enemies = [];
  score = 0;
  scoreDisplay.textContent = '击毁敌机：0';
  resume.style.display = 'none'; resume.style.animation = 'none';
  backBtn.style.display = 'none';
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  running = true;
  enemyInterval = setInterval(spawnEnemy, 10);
  gameLoop();
});
</script>

</body>
</html>
